<!DOCTYPE HTML>
<html lang="fa-IR">
<head>
	<title>مجله حیاطمون</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="UTF-8">


	<!-- Font -->

	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


	<!-- Stylesheets -->

	<link rel="stylesheet" href="/assets/cdn/WebFonts/css/fontiran.css">

	<link href="/blog/common-css/bootstrap.css" rel="stylesheet">

	<link href="/blog/common-css/ionicons.css" rel="stylesheet">


	<link href="/blog/blog-sidebar/css/styles.css" rel="stylesheet">

	<link href="/blog/blog-sidebar/css/responsive.css" rel="stylesheet">

	<script>
		/**
		 * @param {String} HTML representing a single element
		 * @return {Element}
		 */
		function htmlToElement(html) {
			var template = document.createElement('template');
			html = html.trim(); // Never return a text node of whitespace as the result
			template.innerHTML = html;
			return template.content.firstChild;
		}
	</script>

<template id="template.post">
	<div class="col-md-6 col-sm-12">
		<div class="card h-100">
			<div class="single-post post-style-1">
				<div class="blog-image"><img src="{cover}" alt="عکس پست"></div>

				<a class="avatar" href="#"><img src="/blog/images/icons8-team-355979.jpg" alt="Profile Image"></a>

				<div class="blog-info">

					<h4 class="title"><a href="{link}"><b>{title}</b></a></h4>

					<ul class="post-footer">
						<li><a href="#"><i class="ion-eye"></i>138</a></li>
						<li><a href="javascript:void(0)" onclick="strapi.post.like({id})"><i class="ion-heart"></i>{like}</a></li>
						<!-- <li><a href="#"><i class="ion-chatbubble"></i>6</a></li> -->
					</ul>

				</div><!-- blog-info -->
			</div><!-- single-post -->
		</div><!-- card -->
	</div><!-- col-md-6 col-sm-12 -->
</template>

<script>
	function addPost(data) {
		let ws = document.getElementById('workspace')
		let template = document.getElementById('template.post').innerHTML.trim()
		for(let key in data) {
			template = template.split(`{${key}}`).join(data[key])
		}
		let post = htmlToElement(template)
		ws.appendChild(post)
	}
</script>

</head>
<body >

	<div class="slider display-table center-text">
		<h1 class="title display-table-cell"><b>مجله حیاطمون</b></h1>
	</div><!-- slider -->

	<section class="blog-area section">
		<div class="container">

			<div class="row">

				<div class="col-lg-4 col-md-12 ">

					<div class="single-post info-area ">

						<div class="about-area">
							<h4 class="title"><b>درباره حیاطمون</b></h4>
							<p>لورم ایپسوم
								و این داستانا که میگن راجع بهش همش راسته چون یه متن الکیه که هست که باشه</p>
						</div>

						<div class="subscribe-area">

							<h4 class="title"><b>عضو مجله شو</b></h4>
							<div class="input-area">
								<form>
									<input class="email-input" type="text" placeholder="ایمیلتون">
									<button class="submit-btn" type="submit"><i class="ion-ios-email-outline"></i></button>
								</form>
							</div>
						</div>
						<!-- subscribe-area -->
						<!-- </div>

						<div class="tag-area">

							<h4 class="title"><b>TAG CLOUD</b></h4>
							<ul>
								<li><a href="#">Advertise</a></li>
								<li><a href="#">Gifts</a></li>
								<li><a href="#">Discounts</a></li>
								<li><a href="#">About Us</a></li>
								<li><a href="#">Contact</a></li>
								<li><a href="#">Facts</a></li>
								<li><a href="#">Recommendation</a></li>
							</ul>

						</div> -->
						<!-- subscribe-area -->

					</div><!-- info-area -->

				</div><!-- col-lg-4 col-md-12 -->

				<div class="col-lg-8 col-md-12">
					<div class="row" id="workspace">

						
						<!-- inject here -->
						
					</div><!-- row -->

					<a id="more" class="load-more-btn" href="javascript:void(0)" onclick="more()"><b>بیشتر</b></a>

				</div><!-- col-lg-8 col-md-12 -->



			</div><!-- row -->

		</div><!-- container -->
	</section><!-- section -->


	<footer>
		<div class="container">
			<div class="row">

				<div class="col-md-12">
					<div class="footer-section">
						<a class="logo" href="#"><img src="/blog/images/logo.png" alt="Hayatemoon"></a>
						<!-- <a class="logo" href="#"><img src="/blog/images/logo.png" alt="Logo Image"></a> -->
						<p class="copyright">تمام حقوق این اثر مطعلق به حیاطمون میباشد.</p>
						<!-- <p class="copyright">Designed by <a href="https://colorlib.com" target="_blank">Colorlib</a></p> -->
						<ul class="icons">
							<li><a href="#"><i class="ion-social-facebook-outline"></i></a></li>
							<li><a href="#"><i class="ion-social-twitter-outline"></i></a></li>
							<li><a href="#"><i class="ion-social-instagram-outline"></i></a></li>
							<li><a href="#"><i class="ion-social-vimeo-outline"></i></a></li>
							<li><a href="#"><i class="ion-social-pinterest-outline"></i></a></li>
						</ul>

					</div><!-- footer-section -->
				</div><!-- col-md-12 -->

			</div><!-- row -->
		</div><!-- container -->
	</footer>


	<!-- SCRIPTS -->

	<script src="/blog/common-js/jquery-3.1.1.min.js"></script>

	<script src="/blog/common-js/tether.min.js"></script>

	<script src="/blog/common-js/bootstrap.js"></script>

	<script src="/blog/common-js/scripts.js"></script>

	<script src="/script/api.js"></script>

	<script>
		var _start = 0
		var _limit = 10
		function start() {
			strapi.post.find({_start, _limit}).then(posts => {
				for(let post of posts) {
					addPost({
						id: post.id,
						title: post.title,
						cover: post.cover.url,
						link: `/blog/post.html?id=${post.id}`,
						like: post.like ? parseInt(post.like) : 0,
					})
				}
				if(posts.length <= _limit) {
					start = e => e
					more = e => e
					document.getElementById("more").hidden = true
				}
			})
		}
		function more() {
			_start += _limit
			start()
		}
		document.addEventListener("DOMContentLoaded", start)
	</script>
</body>
</html>
